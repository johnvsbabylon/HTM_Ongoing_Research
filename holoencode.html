<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Holographic Encoder v6 (Unified)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Three.js & Lucide -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
                "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/",
                "lucide-react": "https://esm.sh/lucide-react@0.303.0"
            }
        }
    </script>

    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background-color: #000000; touch-action: none; }
        #root { width: 100%; height: 100%; }
        
        .glass-panel {
            background: rgba(2, 6, 23, 0.9);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(34, 211, 238, 0.2);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }
        
        .scan-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(to bottom, transparent 50%, rgba(34, 211, 238, 0.02) 51%);
            background-size: 100% 4px;
            pointer-events: none;
            z-index: 10;
        }

        @keyframes pulse-flow {
            0% { stroke-dashoffset: 20; opacity: 0; }
            50% { opacity: 1; }
            100% { stroke-dashoffset: 0; opacity: 0; }
        }
        .tensor-pulse {
            stroke-dasharray: 5;
            animation: pulse-flow 2s linear infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import * as THREE from 'three';
        import { 
            Play, Pause, RotateCcw, Activity, Layers, 
            Network, Scissors, Zap, Box, BrainCircuit,
            Menu, X, Settings, Eye, EyeOff, CircleDot,
            Info, GitMerge, Fingerprint
        } from 'lucide-react';

        const SECTORS = 64; 
        const LAYERS = 6;
        
        // --- PHYSICS UTILS ---
        const calculateEntropy = (entanglementArray) => {
            let activeLinks = entanglementArray.filter(v => v > 0.5).length;
            return ((activeLinks / SECTORS) * Math.log(SECTORS)).toFixed(2);
        };
        const calculateKoide = (m) => {
            const num = Math.pow(Math.sqrt(m.e) + Math.sqrt(m.mu) + Math.sqrt(m.tau), 2);
            const den = 3 * (m.e + m.mu + m.tau);
            return den === 0 ? 0 : num/den;
        };

        // --- COMPONENT: MERA NETWORK OVERLAY ---
        const MeraNetwork = ({ active, entanglement }) => {
            if (!active) return null;
            const lines = [];
            const nodes = [];
            
            for(let l=0; l<LAYERS-1; l++) {
                const y1 = 100 - (l * (100/LAYERS));
                const y2 = 100 - ((l+1) * (100/LAYERS));
                const countNext = SECTORS / Math.pow(2, l+1);

                for(let i=0; i<countNext; i++) {
                    const xCenter = (i + 0.5) * (100 / countNext);
                    const xLeft = (i*2 + 0.5) * (100 / (countNext*2));
                    const xRight = (i*2 + 1.5) * (100 / (countNext*2));
                    
                    const sectorIdx = Math.floor((i / countNext) * SECTORS);
                    const isAlive = entanglement[sectorIdx] > 0.5;
                    const color = isAlive ? "#22d3ee" : "#7f1d1d";
                    const opacity = isAlive ? 0.4 : 0.1;

                    nodes.push(
                        <polygon key={`n-${l}-${i}`} points={`${xCenter},${y2} ${xCenter-1},${y2+2} ${xCenter+1},${y2+2}`} 
                            fill={color} fillOpacity={opacity + 0.3} />
                    );
                    lines.push(
                        <line key={`l-${l}-${i}-L`} x1={xCenter} y1={y2} x2={xLeft} y2={y1} 
                            stroke={color} strokeWidth="0.5" strokeOpacity={opacity} />,
                        <line key={`l-${l}-${i}-R`} x1={xCenter} y1={y2} x2={xRight} y2={y1} 
                            stroke={color} strokeWidth="0.5" strokeOpacity={opacity} />
                    );
                    if (isAlive) {
                         lines.push(
                            <line key={`p-${l}-${i}`} x1={xLeft} y1={y1} x2={xCenter} y2={y2} 
                                stroke="#a5f3fc" strokeWidth="1" className="tensor-pulse" style={{animationDelay: `${l * 0.5}s`}} />
                         );
                    }
                }
            }
            return (
                <div className="absolute inset-0 z-20 pointer-events-none">
                    <svg viewBox="0 0 100 100" preserveAspectRatio="none" className="w-full h-full opacity-60">
                        {lines}{nodes}
                    </svg>
                </div>
            );
        };

        // --- COMPONENT: 3D BULK VISUALIZER ---
        const BulkVisualizer = ({ entanglement, scenario, setHoverDepth, setHoverSector }) => {
            const mountRef = React.useRef(null);
            const sceneRef = React.useRef(null);
            const geometryRef = React.useRef(null);
            const particlesRef = React.useRef(null);
            const massHierarchyRef = React.useRef(null);
            const raycaster = React.useRef(new THREE.Raycaster());
            const mouse = React.useRef(new THREE.Vector2());

            React.useEffect(() => {
                if (!mountRef.current) return;
                const width = mountRef.current.clientWidth;
                const height = mountRef.current.clientHeight;
                const scene = new THREE.Scene();

                const camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
                camera.position.set(0, 4, 9);
                camera.lookAt(0, 0, 0);

                const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                renderer.setSize(width, height);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                mountRef.current.appendChild(renderer.domElement);

                // --- HOLOGRAPHIC BULK ---
                const radSegs = SECTORS;
                const hSegs = 40;
                const geo = new THREE.PlaneGeometry(20, 10, radSegs, hSegs);
                const mat = new THREE.MeshBasicMaterial({ 
                    color: 0x22d3ee, wireframe: true, side: THREE.DoubleSide, 
                    transparent: true, opacity: 0.15, blending: THREE.AdditiveBlending 
                });
                const mesh = new THREE.Mesh(geo, mat);
                scene.add(mesh);
                geometryRef.current = mesh;

                // --- STANDARD PARTICLES ---
                const pGeo = new THREE.BufferGeometry();
                const pPos = new Float32Array(300);
                for(let i=0; i<300; i++) pPos[i] = (Math.random()-0.5) * 10;
                pGeo.setAttribute('position', new THREE.BufferAttribute(pPos, 3));
                const pMat = new THREE.PointsMaterial({ color: 0x818cf8, size: 0.1, transparent: true, opacity: 0.5 });
                const parts = new THREE.Points(pGeo, pMat);
                parts.visible = scenario !== 'particle'; // Hide in particle mode
                scene.add(parts);
                particlesRef.current = parts;

                // --- MASS HIERARCHY PARTICLES (The 3 Leptons) ---
                const mGroup = new THREE.Group();
                // Electron (Near top/boundary)
                const eMesh = new THREE.Mesh(new THREE.SphereGeometry(0.2), new THREE.MeshBasicMaterial({color: 0x22d3ee}));
                eMesh.position.set(0, 2.5, 0); // z_visual approx 3 is boundary
                // Muon (Middle)
                const muMesh = new THREE.Mesh(new THREE.SphereGeometry(0.4), new THREE.MeshBasicMaterial({color: 0xa855f7}));
                muMesh.position.set(2, 0, 1);
                // Tau (Deep bottom)
                const tauMesh = new THREE.Mesh(new THREE.SphereGeometry(0.6), new THREE.MeshBasicMaterial({color: 0xf472b6}));
                tauMesh.position.set(-1, -2.0, -1);
                
                mGroup.add(eMesh, muMesh, tauMesh);
                mGroup.visible = scenario === 'particle';
                scene.add(mGroup);
                massHierarchyRef.current = mGroup;

                // --- INTERACTIONS ---
                const onMove = (e) => {
                    const clientX = e.clientX || (e.touches ? e.touches[0].clientX : 0);
                    const clientY = e.clientY || (e.touches ? e.touches[0].clientY : 0);
                    const rect = renderer.domElement.getBoundingClientRect();
                    mouse.current.x = ((clientX - rect.left) / rect.width) * 2 - 1;
                    mouse.current.y = -((clientY - rect.top) / rect.height) * 2 + 1;
                    
                    raycaster.current.setFromCamera(mouse.current, camera);
                    const intersects = raycaster.current.intersectObject(mesh);
                    
                    if (intersects.length > 0) {
                        const point = intersects[0].point;
                        const depth = Math.max(0, Math.min(1, (3 - point.y) / 6));
                        const angle = Math.atan2(point.z, point.x);
                        let normAngle = (angle + Math.PI) / (2 * Math.PI);
                        const sector = Math.floor(normAngle * SECTORS) % SECTORS;
                        setHoverDepth(depth);
                        setHoverSector(sector);
                    } else {
                        setHoverDepth(null);
                        setHoverSector(null);
                    }
                };
                
                const canvas = renderer.domElement;
                canvas.addEventListener('mousemove', onMove);
                canvas.addEventListener('touchmove', onMove, {passive: false});

                const animate = () => {
                    requestAnimationFrame(animate);
                    const time = Date.now() * 0.001;

                    // Update Bulk
                    if (geometryRef.current) {
                        const pos = geometryRef.current.geometry.attributes.position;
                        const count = pos.count;
                        for(let i=0; i<count; i++) {
                            const x = i % (radSegs + 1);
                            const y = Math.floor(i / (radSegs + 1));
                            const u = x / radSegs;
                            const v = y / hSegs;
                            const secIdx = Math.floor(u * SECTORS) % SECTORS;
                            const ent = entanglement[secIdx] !== undefined ? entanglement[secIdx] : 1.0;

                            let r = 2 + (v * 4);
                            if (ent < 0.5) {
                                const tear = (1 - ent) * Math.pow(v, 2) * 5;
                                r = Math.max(0.1, r - tear);
                            }
                            r += Math.sin(u * 20 + time) * 0.05 * v;
                            const theta = u * Math.PI * 2;
                            pos.setXYZ(i, r * Math.cos(theta), (v * 6) - 3, r * Math.sin(theta));
                        }
                        pos.needsUpdate = true;
                        mesh.rotation.y = time * 0.1;
                    }

                    // Rotate Hierarchy
                    if (massHierarchyRef.current && massHierarchyRef.current.visible) {
                        massHierarchyRef.current.rotation.y = time * 0.2;
                        // Bobbing
                        massHierarchyRef.current.children[0].position.y = 2.5 + Math.sin(time*2)*0.1;
                        massHierarchyRef.current.children[1].position.y = 0 + Math.sin(time*1.5)*0.1;
                        massHierarchyRef.current.children[2].position.y = -2.0 + Math.sin(time)*0.1;
                    }

                    renderer.render(scene, camera);
                };
                animate();

                // Resize
                const handleResize = () => {
                    if (!mountRef.current) return;
                    const w = mountRef.current.clientWidth;
                    const h = mountRef.current.clientHeight;
                    camera.aspect = w/h;
                    camera.updateProjectionMatrix();
                    renderer.setSize(w, h);
                };
                window.addEventListener('resize', handleResize);

                return () => {
                    window.removeEventListener('resize', handleResize);
                    canvas.removeEventListener('mousemove', onMove);
                    canvas.removeEventListener('touchmove', onMove);
                    if (mountRef.current) mountRef.current.innerHTML = '';
                };
            }, [entanglement, scenario]);

            return <div ref={mountRef} className="w-full h-full" />;
        };

        // --- COMPONENT: BRAIDING CANVAS ---
        const BraidingVisualizer = () => {
            const canvasRef = React.useRef(null);
            React.useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                let frameId;
                let time = 0;
                
                const draw = () => {
                    time += 0.03;
                    ctx.fillStyle = '#020617';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    const w = canvas.width;
                    const h = canvas.height;

                    // Matrix BG
                    ctx.fillStyle = 'rgba(34, 211, 238, 0.05)';
                    ctx.font = '10px monospace';
                    for(let i=0; i<5; i++) ctx.fillText("SU(2)_braid", Math.random()*w, Math.random()*h);

                    for(let i=0; i<3; i++) {
                        ctx.beginPath();
                        const color = i===0 ? '#22d3ee' : (i===1 ? '#a855f7' : '#f472b6');
                        ctx.strokeStyle = color;
                        ctx.lineWidth = 4;
                        for(let x=0; x<w; x+=5) {
                            const t = x * 0.01 + time;
                            // Braid function
                            let yOff = Math.sin(t + i*2) * (h/6);
                            if (Math.cos(time * 0.2) > 0) {
                                // Dynamic crossing
                                yOff = Math.cos(t + i*2.5) * (h/6);
                            }
                            const y = h/2 + yOff;
                            if (x===0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
                        }
                        ctx.stroke();
                        ctx.fillStyle = color;
                        ctx.fillText(`Î½_${i+1}`, 10, h/2 + (i-1)*(h/4));
                    }
                    frameId = requestAnimationFrame(draw);
                };
                const resize = () => {
                    canvas.width = canvas.clientWidth;
                    canvas.height = canvas.clientHeight;
                };
                window.addEventListener('resize', resize);
                resize();
                draw();
                return () => {
                    cancelAnimationFrame(frameId);
                    window.removeEventListener('resize', resize);
                };
            }, []);
            return <canvas ref={canvasRef} className="w-full h-full" />;
        };

        // --- MAIN APP ---
        const App = () => {
            const [viewMode, setViewMode] = React.useState('bulk');
            const [scenario, setScenario] = React.useState('vacuum');
            const [entanglement, setEntanglement] = React.useState(new Array(SECTORS).fill(1.0));
            const [showTensor, setShowTensor] = React.useState(false);
            const [hoverDepth, setHoverDepth] = React.useState(null);
            const [hoverSector, setHoverSector] = React.useState(null);
            const [activePanel, setActivePanel] = React.useState('controls'); // 'controls' | 'info' | null

            // Metrics
            const masses = { e: 0.511, mu: 105.66, tau: 1776.86 };
            const koideQ = calculateKoide(masses);
            const entropy = calculateEntropy(entanglement);

            const loadScenario = (type) => {
                setScenario(type);
                let newEnt = new Array(SECTORS).fill(1.0);
                if (type === 'firewall') {
                    for(let i=20; i<44; i++) newEnt[i] = 0.0;
                } else if (type === 'particle') {
                    setShowTensor(true);
                }
                setEntanglement(newEnt);
                // Auto-close on mobile
                if (window.innerWidth < 768) setActivePanel(null);
            };

            const toggleLink = (i) => {
                setEntanglement(prev => {
                    const next = [...prev];
                    next[i] = next[i] > 0.5 ? 0.0 : 1.0;
                    return next;
                });
                setScenario('custom');
            };

            // Smart Panel Logic
            const togglePanel = (panelName) => {
                setActivePanel(prev => prev === panelName ? null : panelName);
            };

            return (
                <div className="relative w-full h-full flex flex-col font-sans text-cyan-50 overflow-hidden selection:bg-cyan-500/30">
                    <div className="scan-overlay"></div>
                    
                    {/* --- HEADER --- */}
                    <div className="h-16 glass-panel z-50 flex items-center justify-between px-3 md:px-6 shrink-0 relative">
                        <div className="flex items-center gap-2">
                            <BrainCircuit className="text-cyan-400 hidden md:block" />
                            <h1 className="font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-400 text-sm md:text-lg tracking-wider">
                                HOLO ENCODER v6
                            </h1>
                        </div>
                        
                        <div className="flex bg-slate-900/80 rounded-lg p-1 border border-slate-700">
                            <button onClick={() => setViewMode('bulk')} 
                                className={`px-3 py-1 rounded text-[10px] md:text-xs flex items-center gap-1 transition-all ${viewMode === 'bulk' ? 'bg-cyan-600 text-white shadow-[0_0_10px_rgba(34,211,238,0.5)] ring-1 ring-cyan-300' : 'text-slate-400'}`}>
                                <Box size={14} /> <span className="hidden md:inline">Geometry</span>
                            </button>
                            <button onClick={() => setViewMode('braid')} 
                                className={`px-3 py-1 rounded text-[10px] md:text-xs flex items-center gap-1 transition-all ${viewMode === 'braid' ? 'bg-purple-600 text-white shadow-[0_0_10px_rgba(168,85,247,0.5)] ring-1 ring-purple-300' : 'text-slate-400'}`}>
                                <GitMerge size={14} /> <span className="hidden md:inline">Braiding</span>
                            </button>
                        </div>

                        <div className="flex gap-2">
                            <button onClick={() => togglePanel('controls')} className={`p-2 rounded hover:bg-slate-800 transition-colors ${activePanel === 'controls' ? 'text-cyan-400 bg-slate-800 ring-1 ring-cyan-500' : 'text-slate-500'}`}>
                                <Settings size={18} />
                            </button>
                            <button onClick={() => togglePanel('info')} className={`p-2 rounded hover:bg-slate-800 transition-colors ${activePanel === 'info' ? 'text-cyan-400 bg-slate-800 ring-1 ring-cyan-500' : 'text-slate-500'}`}>
                                <Info size={18} />
                            </button>
                        </div>
                    </div>

                    {/* --- MAIN AREA --- */}
                    <div className="flex-1 relative bg-gradient-to-b from-slate-950 to-black overflow-hidden z-0">
                        
                        {/* Render Engines */}
                        <div className="absolute inset-0 z-0">
                            {viewMode === 'bulk' ? (
                                <>
                                    <BulkVisualizer 
                                        entanglement={entanglement} 
                                        scenario={scenario}
                                        setHoverDepth={setHoverDepth}
                                        setHoverSector={setHoverSector}
                                    />
                                    <MeraNetwork active={showTensor} entanglement={entanglement} />
                                </>
                            ) : (
                                <BraidingVisualizer />
                            )}
                        </div>

                        {/* LEFT PANEL: CONTROLS */}
                        <div className={`absolute top-2 left-2 w-64 glass-panel rounded-lg p-4 z-40 space-y-4 transform transition-all duration-300 origin-top-left
                            ${activePanel === 'controls' ? 'scale-100 opacity-100 translate-x-0' : 'scale-90 opacity-0 -translate-x-4 pointer-events-none'}`}>
                            
                            <div className="flex justify-between items-center mb-2">
                                <h3 className="text-xs font-bold text-cyan-400 uppercase">Presets</h3>
                                <button onClick={() => setActivePanel(null)} className="text-slate-500"><X size={14}/></button>
                            </div>

                            <div className="grid grid-cols-2 gap-2">
                                {[
                                    {id: 'vacuum', label: 'Vacuum', icon: Box},
                                    {id: 'firewall', label: 'Firewall', icon: Scissors},
                                    {id: 'particle', label: 'Particles', icon: Zap}, // Mass Hierarchy
                                    {id: 'blackhole', label: 'Black Hole', icon: CircleDot}
                                ].map(p => (
                                    <button key={p.id} onClick={() => { if(viewMode!=='bulk') setViewMode('bulk'); loadScenario(p.id); }}
                                    className={`p-2 rounded border text-xs flex items-center justify-center gap-2 transition-all
                                        ${scenario === p.id && viewMode === 'bulk' ? 'bg-cyan-900/50 border-cyan-500 text-cyan-100 shadow' : 'bg-slate-900/40 border-slate-800 text-slate-400 hover:border-slate-600'}`}>
                                        <p.icon size={14} /> {p.label}
                                    </button>
                                ))}
                            </div>
                            
                            {viewMode === 'bulk' && (
                                <div className="flex items-center justify-between pt-2 border-t border-slate-800">
                                    <span className="text-xs text-slate-300 flex items-center gap-2"><Network size={12}/> Tensor Net</span>
                                    <button onClick={() => setShowTensor(!showTensor)} 
                                        className={`w-8 h-4 rounded-full relative transition-colors ${showTensor ? 'bg-cyan-500' : 'bg-slate-700'}`}>
                                        <div className={`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${showTensor ? 'left-4' : 'left-0.5'}`} />
                                    </button>
                                </div>
                            )}
                            <div className="text-[10px] text-slate-500 italic mt-2">
                                {viewMode==='braid' ? 'Switch to Geometry mode to use presets.' : 'Select scenario to re-config spacetime.'}
                            </div>
                        </div>

                        {/* RIGHT PANEL: INFO */}
                        <div className={`absolute top-2 right-2 w-64 glass-panel rounded-lg p-4 z-40 text-xs text-slate-300 transform transition-all duration-300 origin-top-right
                             ${activePanel === 'info' ? 'scale-100 opacity-100 translate-x-0' : 'scale-90 opacity-0 translate-x-4 pointer-events-none'}`}>
                             <div className="flex justify-between items-center mb-2">
                                <h3 className="font-bold text-cyan-400">Telemetry</h3>
                                <button onClick={() => setActivePanel(null)} className="text-slate-500"><X size={14}/></button>
                            </div>
                            <div className="space-y-2 font-mono">
                                <div className="flex justify-between"><span>Entropy (S):</span> <span className="text-white">{entropy}</span></div>
                                <div className="flex justify-between"><span>Koide (Q):</span> <span className={Math.abs(koideQ-0.666)>0.01 ? "text-yellow-400":"text-green-400"}>{koideQ.toFixed(5)}</span></div>
                                <div className="flex justify-between"><span>Depth z:</span> <span className="text-white">{hoverDepth ? hoverDepth.toFixed(2) : "0.00"}</span></div>
                            </div>
                            
                            {scenario === 'particle' && viewMode === 'bulk' && (
                                <div className="mt-3 pt-3 border-t border-slate-700">
                                    <div className="text-cyan-400 font-bold mb-1">Mass Hierarchy Active</div>
                                    <div className="grid grid-cols-1 gap-1 text-[10px]">
                                        <div className="flex items-center gap-2"><div className="w-2 h-2 rounded-full bg-cyan-400"></div> Electron (UV / Boundary)</div>
                                        <div className="flex items-center gap-2"><div className="w-2 h-2 rounded-full bg-purple-500"></div> Muon (Intermediate)</div>
                                        <div className="flex items-center gap-2"><div className="w-2 h-2 rounded-full bg-pink-500"></div> Tau (IR / Deep Bulk)</div>
                                    </div>
                                </div>
                            )}

                            <div className="mt-4 pt-4 border-t border-slate-700 text-[10px]">
                                {hoverDepth ? "HKLL ACTIVE: Localized bulk particle maps to smeared boundary operator." : "System Idle."}
                            </div>
                        </div>

                    </div>

                    {/* --- BOUNDARY STRIP --- */}
                    {viewMode === 'bulk' && (
                        <div className="h-20 glass-panel border-t border-cyan-500/20 z-40 relative flex flex-col shrink-0">
                            <div className="flex-1 flex items-end px-2 gap-[1px]">
                                {entanglement.map((val, i) => {
                                    let smearOpacity = 0;
                                    if (hoverDepth && hoverSector !== null) {
                                        let dist = Math.abs(i - hoverSector);
                                        if (dist > SECTORS/2) dist = SECTORS - dist;
                                        const sigma = hoverDepth * 8 + 1; 
                                        smearOpacity = Math.exp( - (dist * dist) / (2 * sigma * sigma) );
                                    }
                                    return (
                                        <div key={i} className="flex-1 h-full flex flex-col justify-end relative">
                                            <div className="absolute bottom-0 left-0 w-full bg-pink-500 transition-opacity duration-75 pointer-events-none"
                                                style={{ height: '100%', opacity: smearOpacity * 0.8, filter: 'blur(2px)' }} />
                                            <button 
                                                onClick={() => toggleLink(i)}
                                                className={`w-full relative z-10 transition-all duration-200 rounded-t-sm touch-manipulation
                                                    ${val > 0.5 ? 'h-full bg-cyan-500/80' : 'h-[20%] bg-red-900/50 border-t border-red-500'}`}
                                            />
                                        </div>
                                    );
                                })}
                            </div>
                            <div className="h-5 bg-black/60 text-[9px] text-slate-500 flex items-center justify-between px-4 uppercase tracking-wider">
                                <span>Boundary CFT</span>
                                <span className={hoverDepth ? "text-pink-400" : ""}>{hoverDepth ? "Smeared Op (HKLL)" : "Entanglement"}</span>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
